*&---------------------------------------------------------------------*
*& Include ZFI025_3_TOP
*&---------------------------------------------------------------------*
DATA:OK_CODE  TYPE SY-UCOMM,
     OK_CODE1 TYPE SY-UCOMM,
     OK_CODE2 TYPE SY-UCOMM.
DATA:CONTP         TYPE REF TO CL_GUI_CUSTOM_CONTAINER,
     SPLI1         TYPE REF TO CL_GUI_SPLITTER_CONTAINER,
     SPLI2         TYPE REF TO CL_GUI_SPLITTER_CONTAINER,
     CONT1         TYPE REF TO CL_GUI_CONTAINER,
     CONT2         TYPE REF TO CL_GUI_CONTAINER,
     CONT3         TYPE REF TO CL_GUI_CONTAINER,
     GRID1         TYPE REF TO CL_GUI_ALV_GRID,
     GRID2         TYPE REF TO CL_GUI_ALV_GRID,
     GS_STBL       TYPE LVC_S_STBL,
     FLDCT1        TYPE LVC_T_FCAT WITH HEADER LINE,
     FLDCT2        TYPE LVC_T_FCAT WITH HEADER LINE,
     RETURN_TAB    TYPE  TABLE OF DDSHRETVAL,
     WA_RETURN_TAB TYPE DDSHRETVAL,
     SLAYT         TYPE LVC_S_LAYO,
     VARNT         TYPE DISVARIANT,
     IT_EF1        TYPE UI_FUNCTIONS,
     IT_EF2        TYPE UI_FUNCTIONS,
     IT_F4         TYPE  LVC_T_F4,
     WA_F4         TYPE  LVC_S_F4,
     WA_MODI       TYPE LVC_S_MODI,
     IT_CELL       TYPE LVC_T_STYL,
     WA_CELL       TYPE LVC_S_STYL.
DATA: CHANGEABLE,
      CHANGED,   "如果为X，说明ALV改过但是没有分配
      REFRESHALV,
      ALVERROR.
FIELD-SYMBOLS:<FS_VALUE> TYPE ANY,
              <IT_MODI>  TYPE LVC_T_MODI.
DATA:AFIELD   TYPE LVC_S_FCAT,
     LV_ZFLAG TYPE CHAR1.
*& ALV
DATA:GS_FCAT  TYPE LVC_S_FCAT,
     GT_FCAT  TYPE LVC_T_FCAT,
     GT_FCAT1 TYPE LVC_T_FCAT,
     GS_LAYO  TYPE LVC_S_LAYO,
     GS_LAYO1 TYPE LVC_S_LAYO,
     GS_GRID  TYPE LVC_S_GLAY,
     WA_VARNT LIKE DISVARIANT,   "显示布局按钮
     VARNT1   LIKE DISVARIANT,   "显示布局按钮
     REPID    LIKE SY-REPID.
DATA:GS_GRID_SETTINGS TYPE  LVC_S_GLAY. "回车更新内表数据”
DATA:GO_ALV TYPE REF TO CL_GUI_ALV_GRID."刷新alv

*& 事件
DATA: GT_EVENT  TYPE SLIS_T_EVENT WITH HEADER LINE,
      GT_EVENT1 TYPE SLIS_T_EVENT WITH HEADER LINE.
RANGES:S_PSPNR FOR PRPS-PSPNR.
DATA:GV_FLG  TYPE CHAR01,
     GV_FLG1 TYPE CHAR01.
DATA:BEGIN OF WA_HEAD1 ,
       CHGNO_D     TYPE ZTFI_PAYEEDOC-CHGNO_D,
       DFKNO       TYPE ZTFI_PAYEEDOC-DFKNO,
       KUNWE       TYPE ZTFI_PAYEEDOC-KUNWE,
       NAME1       TYPE ZTFI_PAYEEDOC-NAME1,
       PARTNER     TYPE ZTFI_PAYEEDOC-PARTNER,
       NAME_ORG1   TYPE ZTFI_PAYEEDOC-NAME_ORG1,
       PAYEEACCTNO TYPE ZTFI_PAYEEDOC-PAYEEACCTNO,
       DMBTR       TYPE ZTFI_PAYEEDOC-DMBTR,
       PZUSR       TYPE ZTFI_PAYEEDOC-PZUSR,
       ZREASON     TYPE ZTFI_PAYEEDOC-ZREASON,
       ZSQR        TYPE ZTFI_PAYEEDOC-ZSQR,
       PAYEENAME   TYPE ZTFI_PAYEEDOC-PAYEENAME,
       ZCATE       TYPE ZE_ZCATE,
       POSNR       TYPE POSNR,
       FILE(132)   TYPE C,
       FILE1(132)  TYPE C,
       FILE2(132)  TYPE C,
       FILE3(132)  TYPE C,
       RTYPE       TYPE BAPI_MTYPE,
     END OF WA_HEAD1,
     WA_HEAD2 TYPE ZSFI205,
     T_FILE   TYPE TABLE OF ZSFI208 WITH HEADER LINE,
     PSPNR    TYPE PRPS-PSPNR,
     POSID    TYPE ZTPS010A-PSPID,
     DATA_TAB TYPE TABLE OF BAPICONTEN WITH HEADER LINE,
     ZNUMBER  TYPE ZTNUMS_UPDATE-ZNUMBER10,
     LEN      TYPE I,
     9001FLG  TYPE CHAR1.
DATA:PSPID1 TYPE ZTPS010A-PSPID,
     PSPID2 TYPE ZTPS010A-PSPID.
*& 输出内表
TYPES:BEGIN OF GS_OUT,
        CHECK     TYPE CHAR1,            "复选框
        LIGHT     TYPE ICONS-TEXT,       "红绿灯
        CHBOX,
        SEGMT     TYPE FAGL_SEGMT-NAME,
        PSEGMT     TYPE FAGL_SEGMT-NAME,
        MSG       TYPE BAPI_MSG,
        ZCATET    TYPE DDTEXT,
        ZSIGNT    TYPE DDTEXT,
        POST1WBS  TYPE PRPS-POST1,
        CELLSTYLE TYPE LVC_T_STYL.
        INCLUDE TYPE ZTFI_PAYEEDOC.
TYPES:END OF GS_OUT.
DATA:GT_OUT TYPE TABLE OF GS_OUT WITH HEADER LINE.
DATA BEGIN OF ITAB OCCURS 0.
INCLUDE TYPE ZTFI_SPLITCONT.
DATA:CHECK,
     UPDKZ_O,
     MSG       TYPE BAPI_MSG,
     RTYPE     TYPE BAPI_MTYPE,
     BUTXT     TYPE BUTXT,
     SEGMT     TYPE FAGL_SEGMT-NAME,
     CURRENCY  TYPE ZTFI_PAYEEDOC-CURRENCY,
     ZCATET    TYPE DDTEXT,
     ZSIGNT    TYPE DDTEXT,
     BCCFFLG   TYPE CHAR1,
     POST1WBS  TYPE PROJ-POST1,
     CELLSTYLE TYPE LVC_T_STYL,
     END OF ITAB,
     WA1      LIKE LINE OF GT_OUT,
     WA2      LIKE LINE OF ITAB,
     NUM      TYPE I,
     POST1WBS TYPE PRPS-POST1,
     NUM9000Z TYPE I,
     RETURN   TYPE TABLE OF BAPIRET2 WITH HEADER LINE.
DATA:BEGIN OF LT_WAERS OCCURS 0,
       CURRENCY TYPE ZTFI_PAYEEDOC-CURRENCY,
     END OF LT_WAERS.

DATA:BEGIN OF LT_PARTNER OCCURS 0,
       PARTNER  TYPE ZTFI_PAYEEDOC-PARTNER,
       CURRENCY TYPE ZTFI_PAYEEDOC-CURRENCY,
     END OF LT_PARTNER.

DATA:BEGIN OF LT_ZPYCAT OCCURS 0,
       ZPYCAT   TYPE ZTFI_PAYEEDOC-ZPYCAT,
       CURRENCY TYPE ZTFI_PAYEEDOC-CURRENCY,
     END OF LT_ZPYCAT.

DATA:BEGIN OF LT_CHGNO_D OCCURS 0,
       CHGNO_D  TYPE ZTFI_PAYEEDOC-CHGNO_D,
       CURRENCY TYPE ZTFI_PAYEEDOC-CURRENCY,
     END OF LT_CHGNO_D.
TYPES:BEGIN OF GS_OUT_PZ,
        FIELD_STYLE TYPE LVC_T_STYL,
        CHECK       TYPE CHAR1.            "复选框
        INCLUDE TYPE ZSFI_DOCUMENT_POST1.
TYPES:END OF GS_OUT_PZ.
DATA:GT_OUT_PZ TYPE TABLE OF GS_OUT_PZ WITH HEADER LINE.
*DATA:AFIELD        TYPE LVC_S_FCAT.
DATA:LV_DOC_NO     TYPE BELNR_D.
DATA:LV_ITEMNO_ACC TYPE POSNR_ACC.
*& 交易类型配置表
DATA:GT_ZTFI_DEALTYPE TYPE TABLE OF ZTFI_DEALTYPE WITH HEADER LINE.

*& 借贷标识描述
DATA:GT_ZDFI_TRANFLAG TYPE TABLE OF	DD07V WITH HEADER LINE.

*& 账号类型描述
DATA:GT_ZDFI_ACCTTYPE TYPE TABLE OF DD07V WITH HEADER LINE.

*& 开户行帐户
DATA:BEGIN OF GT_ACCTNO OCCURS 0,
       ACCTNO TYPE ZTFI_PAYEEDOC-ACCTNO,
       BANKN  TYPE T012K-BANKN,
       REFZL  TYPE T012K-REFZL,
       HKONT  TYPE T012K-HKONT,
     END OF GT_ACCTNO.
DATA:GT_T012K TYPE TABLE OF T012K WITH HEADER LINE.

*& 银行账号
DATA:BEGIN OF GT_PAYEEACCTNO OCCURS 0,
       PARTNER     TYPE ZTFI_PAYEEDOC-PARTNER,
       PAYEEACCTNO TYPE ZTFI_PAYEEDOC-PAYEEACCTNO,
       BANKN       TYPE BUT0BK-BANKN,
       BKEXT       TYPE BUT0BK-BKEXT,
       NAME_ORG1   TYPE BUT000-NAME_ORG1,
     END OF GT_PAYEEACCTNO.

*& 对方户名
DATA:BEGIN OF GT_PAYEENAME OCCURS 0,
       PAYEENAME TYPE BUT000-NAME_ORG1,
     END OF GT_PAYEENAME.

DATA:GT_BUT000 TYPE TABLE OF BUT000 WITH HEADER LINE.
DATA:BEGIN OF T_TAB OCCURS 0,
       ZPYCAT TYPE ZTFI_DEALTYPE-ZPYCAT,
       BUSTXT TYPE ZTFI_DEALTYPE-BUSTXT,
     END OF T_TAB.
*& 模拟凭证号
DATA:BEGIN OF GT_DOC_NO OCCURS 0,
       DOC_NO TYPE ZSFI_DOCUMENT_POST1-DOC_NO,
     END OF GT_DOC_NO.
DATA:GV_NUM(4) TYPE N.
DATA:GV_ITEMNO_ACC TYPE POSNR_ACC.

*& 往来类型
DATA:GV_RPTYP TYPE ZTFI_DEALTYPE-RPTYP.

*& 帐户类型
DATA:GV_KOART  TYPE KOART,
     GV_KOART1 TYPE KOART.

*& 会计科目
DATA:GV_HKONT TYPE HKONT.

*& 票据台账
DATA:GT_ZBSED   TYPE TABLE OF ZBSED WITH HEADER LINE,
     GT_ZBSED_K TYPE TABLE OF ZBSED_K WITH HEADER LINE.

*& 销售视图客户
DATA:GT_KNVV_KUNNR   TYPE TABLE OF CVP_S_VKORG_KUNNR WITH HEADER LINE,
     IT_ZSIGN        TYPE TABLE OF DD07V WITH HEADER LINE,
     IT_ZTFI_PYREDAZ TYPE TABLE OF ZTFI_PYREDAZ WITH HEADER LINE.

*& kunnr校验 BY CL 20220512
TYPES:BEGIN OF TY_KUNNR,
        KUNNR TYPE  VBAK-KUNNR,
      END OF TY_KUNNR.
DATA:IT_KUNNR TYPE TABLE OF TY_KUNNR WITH HEADER LINE.
DATA:BEGIN OF IT_SEGM OCCURS 0,
       SEGMENT TYPE FAGL_SEGMT-SEGMENT,
     END OF IT_SEGM.
DATA:LV_ANSWER     TYPE CHAR1.
DATA:TABIX TYPE SY-TABIX.
DATA:IT_ZCATE TYPE TABLE OF DD07V WITH HEADER LINE.
CONSTANTS:RED   TYPE ICON-ID VALUE '@0A@',
          GREEN TYPE ICON-ID VALUE '@08@'.
FIELD-SYMBOLS:<FS> TYPE ANY.
